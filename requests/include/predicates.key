\predicates {
    appears(int[], int, int, int);
    maxe(int[], int, int, int);
}

\rules {
    appears {
        \schemaVar \term int[] A;
        \schemaVar \term int x;
        \schemaVar \term int start;
        \schemaVar \term int end;
        \schemaVar \variable int q;
        \find (appears(A, x, start, end))
        \varcond (\notFreeIn(q,A), \notFreeIn(q,x), \notFreeIn(q,start), \notFreeIn(q,end))
        \replacewith (\exists int q; (q >= start & q < end & A[q]=x))
        \heuristics(simplify)
    };
    maxe {
        \schemaVar \term int[] A;
        \schemaVar \term int begin;
        \schemaVar \term int end;
        \schemaVar \term int m;
        \schemaVar \variable int q;
        \find (maxe(A, begin, end, m))
        \varcond (\notFreeIn(q,A), \notFreeIn(q,begin), \notFreeIn(q,end), \notFreeIn(q,m))
        \replacewith (\forall int q; ((q >= begin & q < end) -> A[m]>=A[q]))
        \heuristics(simplify)
    };
}
