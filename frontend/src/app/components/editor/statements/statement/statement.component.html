<div class="refinementBox" cdkDragBoundary="#editorContainer" #refinementBox>
  @if (!hideTargetHandle) {
    <handle type="target" position="top" />
  }
  @if (!hideSourceHandle) {
    <handle type="source" position="bottom" id="0" />
  }
  <div class="refinementBoxTitle" #boxTitle>
    <!---<p>{{ refinement.getTitle() }} #{{ "insert id" ?? _node.statement.id }}</p> --->
    <p>{{ refinement.getTitle() }} #{{ "insert id" }}</p>
    @if (_node.parent) {
      <mat-icon [style.cursor]="'pointer'" (click)="deleteRefinement()" style="color: #6c0b1f; justify-self: end;"
        >delete
      </mat-icon>
    }
  </div>

  <div style="display: flex">
    <div appGtBorder #preconditionDiv style="width: 50px; min-height: 140px">
      <mat-drawer-container class="example-container" autosize>
        <mat-drawer #preconditionDrawer class="example-sidenav" mode="side">
          <div class="conditionParent">
            <app-condition-editor
              [(condition)]="_node.precondition"
              [editable]="_node.preconditionEditable()"
            ></app-condition-editor>
          </div>
        </mat-drawer>

        <mat-drawer-content class="example-sidenav-content">
          <button
            type="button"
            mat-button
            (click)="toggleConditionEditorView(false)"
            class="verticalButton bottomLeft"
            >
            Precondition
            <mat-icon
              >{{
              preconditionDrawer.opened
              ? "keyboard_arrow_up"
              : "keyboard_arrow_down"
              }}
            </mat-icon>
          </button>
        </mat-drawer-content>
      </mat-drawer-container>
    </div>

    <div style="display: flex; align-items: center">
      <ng-content></ng-content>
    </div>

    <div
      appGtBorder
      #postconditionDiv
      style="width: 50px"
      >
      <mat-drawer-container class="example-container" autosize>
        <mat-drawer
          #postconditionDrawer
          class="example-sidenav"
          mode="side"
          position="end"
          >
          <div class="conditionParent">
            <app-condition-editor
              [(condition)]="_node.postcondition"
              [editable]="_node.postconditionEditable()"
            ></app-condition-editor>
          </div>
        </mat-drawer>
        <mat-drawer-content class="example-sidenav-content">
          <button
            type="button"
            mat-button
            (click)="toggleConditionEditorView(true)"
            class="verticalButton bottomRight"
            >
            Postcondition
            <mat-icon
              >{{
              postconditionDrawer.opened
              ? "keyboard_arrow_up"
              : "keyboard_arrow_down"
              }}
            </mat-icon>
          </button>
        </mat-drawer-content>
      </mat-drawer-container>
    </div>
  </div>
</div>
